<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Usuario - Sistema de Gestión de Pastoreo</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome para íconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/design-system.css') }}">
</head>
<body>
    <!-- Skip Links para accesibilidad -->
    <a href="#register-form" class="skip-link">Saltar al formulario de registro</a>
    
    <div class="register-container">
        <div class="register-card">
            <header class="logo-area">
                <i class="fas fa-leaf logo-icon" aria-hidden="true"></i>
                <h1 class="brand-title">Sistema de Pastoreo</h1>
                <h2 class="brand-subtitle">Crear Cuenta</h2>
            </header>
            
            <!-- Área de mensajes flash -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div aria-live="polite" aria-atomic="true">
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                                <i class="fas fa-{% if category == 'danger' %}exclamation-triangle{% elif category == 'success' %}check-circle{% elif category == 'warning' %}exclamation-circle{% else %}info-circle{% endif %} me-2" aria-hidden="true"></i>
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar mensaje de {{ category }}"></button>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            
            <main>
                <form method="POST" action="{{ url_for('auth.register') }}" id="register-form" novalidate aria-label="Formulario de registro de usuario">
                    <div class="form-group-accessible">
                        <div class="form-floating">
                            <input type="text" 
                                   class="form-control form-control-accessible" 
                                   id="nombre" 
                                   name="nombre" 
                                   placeholder="Tu nombre completo" 
                                   required 
                                   autocomplete="name"
                                   aria-describedby="nombre-help"
                                   aria-required="true"
                                   value="{{ request.form.get('nombre', '') }}">
                            <label for="nombre" class="form-label-accessible">
                                <i class="fas fa-user me-2" aria-hidden="true"></i>
                                Nombre completo
                                <span class="text-danger" aria-label="campo requerido">*</span>
                            </label>
                        </div>
                        <div class="form-help" id="nombre-help">
                            Ingresa tu nombre y apellido completos
                        </div>
                    </div>
                    
                    <div class="form-group-accessible">
                        <div class="form-floating">
                            <input type="email" 
                                   class="form-control form-control-accessible" 
                                   id="email" 
                                   name="email" 
                                   placeholder="usuario@ejemplo.com" 
                                   required 
                                   autocomplete="email"
                                   aria-describedby="email-help"
                                   aria-required="true"
                                   value="{{ request.form.get('email', '') }}">
                            <label for="email" class="form-label-accessible">
                                <i class="fas fa-envelope me-2" aria-hidden="true"></i>
                                Correo electrónico
                                <span class="text-danger" aria-label="campo requerido">*</span>
                            </label>
                        </div>
                        <div class="form-help" id="email-help">
                            Será tu usuario para iniciar sesión
                        </div>
                    </div>
                    
                    <div class="form-group-accessible">
                        <div class="form-floating">
                            <input type="password" 
                                   class="form-control form-control-accessible" 
                                   id="password" 
                                   name="password" 
                                   placeholder="Contraseña" 
                                   required 
                                   autocomplete="new-password"
                                   aria-describedby="password-help password-strength"
                                   aria-required="true"
                                   minlength="6">
                            <label for="password" class="form-label-accessible">
                                <i class="fas fa-lock me-2" aria-hidden="true"></i>
                                Contraseña
                                <span class="text-danger" aria-label="campo requerido">*</span>
                            </label>
                        </div>
                        <div class="form-help" id="password-help">
                            Mínimo 6 caracteres. Incluye mayúsculas, números y símbolos para mayor seguridad
                        </div>
                        <div class="password-strength" id="password-strength" aria-live="polite">
                            <div class="strength-bar">
                                <div class="strength-fill" id="strength-fill"></div>
                            </div>
                            <div class="strength-text" id="strength-text">Ingresa una contraseña</div>
                        </div>
                    </div>
                    
                    <div class="form-group-accessible">
                        <div class="form-floating">
                            <input type="password" 
                                   class="form-control form-control-accessible" 
                                   id="confirm_password" 
                                   name="confirm_password" 
                                   placeholder="Confirmar contraseña" 
                                   required 
                                   autocomplete="new-password"
                                   aria-describedby="confirm-password-help"
                                   aria-required="true">
                            <label for="confirm_password" class="form-label-accessible">
                                <i class="fas fa-lock me-2" aria-hidden="true"></i>
                                Confirmar contraseña
                                <span class="text-danger" aria-label="campo requerido">*</span>
                            </label>
                        </div>
                        <div class="form-help" id="confirm-password-help">
                            Repite la contraseña para confirmar
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-success btn-register" aria-describedby="register-button-help">
                        <i class="fas fa-user-plus me-2" aria-hidden="true"></i>
                        <span>Crear Cuenta</span>
                    </button>
                    <div class="sr-only" id="register-button-help">
                        Presiona Enter o haz clic para crear tu cuenta en el sistema
                    </div>
                </form>
            </main>
            
            <footer class="login-link">
                <p class="mb-0">¿Ya tienes una cuenta? 
                    <a href="{{ url_for('auth.login') }}" aria-label="Ir a la página de inicio de sesión">
                        <i class="fas fa-sign-in-alt me-1" aria-hidden="true"></i>Inicia sesión aquí
                    </a>
                </p>
            </footer>
        </div>
    </div>

    <!-- Región live para anuncios de accesibilidad -->
    <div aria-live="polite" aria-atomic="true" class="sr-only" id="live-announcements"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JS personalizado -->
    <script src="{{ url_for('static', filename='js/modules/register.html.js') }}"></script>

</body>
</html>